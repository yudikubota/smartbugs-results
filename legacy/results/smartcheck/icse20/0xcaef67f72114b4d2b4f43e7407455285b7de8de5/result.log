/unique_chucks/1/0xcaef67f72114b4d2b4f43e7407455285b7de8de5.sol
jar:file:/usr/local/lib/node_modules/@smartdec/smartcheck/jdeploy-bundle/smartcheck-2.0-jar-with-dependencies.jar!/solidity-rules.xmlruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 131
column: 4
content: functiongetSizeArrayType(ArrayType_type,uint64_id)constantpublicreturns(uint);

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 132
column: 4
content: functiongetElementInArrayType(ArrayType_type,uint64_id,uint_index)constantpublicreturns(uint8);

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 133
column: 4
content: functiongetMonsterClass(uint32_classId)constantpublicreturns(uint32classId,uint256price,uint256returnPrice,uint32total,boolcatchable);

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 134
column: 4
content: functiongetMonsterObj(uint64_objId)constantpublicreturns(uint64objId,uint32classId,addresstrainer,uint32exp,uint32createIndex,uint32lastClaimIndex,uintcreateTime);

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 135
column: 4
content: functiongetMonsterName(uint64_objId)constantpublicreturns(stringname);

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 136
column: 4
content: functiongetExtraBalance(address_trainer)constantpublicreturns(uint256);

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 137
column: 4
content: functiongetMonsterDexSize(address_trainer)constantpublicreturns(uint);

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 138
column: 4
content: functiongetMonsterObjId(address_trainer,uintindex)constantpublicreturns(uint64);

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 139
column: 4
content: functiongetExpectedBalance(address_trainer)constantpublicreturns(uint256);

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 140
column: 4
content: functiongetMonsterReturn(uint64_objId)constantpublicreturns(uint256current,uint256total);

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 149
column: 4
content: functionisGason(uint64_objId)constantexternalreturns(bool);

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 150
column: 4
content: functiongetObjBattleInfo(uint64_objId)constantexternalreturns(uint32classId,uint32exp,boolisGason,uintancestorLength,uintxfactorsLength);

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 152
column: 4
content: functiongetClassPropertySize(uint32_classId,PropertyType_type)constantexternalreturns(uint);

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 153
column: 4
content: functiongetClassPropertyValue(uint32_classId,PropertyType_type,uintindex)constantexternalreturns(uint32);

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 446
column: 4
content: functiongetCacheClassSize(uint32_classId)constantpublicreturns(uint,uint,uint){CacheClassInfostorageclassInfo=cacheClasses[_classId];return(classInfo.types.length,classInfo.steps.length,classInfo.ancestors.length);}

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 451
column: 4
content: functiongetTrainerInfo(uint8_trainerId)constantexternalreturns(uint32,uint8,uint8,uint8,uint8,uint8,uint8){GymTrainermemorytrainer=gymTrainers[_trainerId];return(trainer.classId,trainer.statBases[0],trainer.statBases[1],trainer.statBases[2],trainer.statBases[3],trainer.statBases[4],trainer.statBases[5]);}

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 457
column: 4
content: functiongetRandom(uint8maxRan,uint8index)constantpublicreturns(uint8){uint256genNum=uint256(block.blockhash(block.number-1));for(uint8i=0;i<index&&i<6;i++){genNum/=256;}returnuint8(genNum%maxRan);}

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 480
column: 4
content: functiongetGainExp(uint8xLevel,uint8yLevel)constantpublicreturns(uint32winExp,uint32loseExp){winExp=levelExpGains[yLevel]*expPercentage/100;if(xLevel>yLevel){if(xLevel>yLevel+10){winExp=5;}else{winExp/=uint32(3)**(xLevel-yLevel)/uint32(2)**(xLevel-yLevel);if(winExp<5)winExp=5;}}loseExp=winExp/3;}

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 501
column: 4
content: functiongetTypeSupport(uint32_aClassId,uint32_bClassId)constantprivatereturns(boolaHasAdvantage,boolbHasAdvantage){for(uinti=0;i<cacheClasses[_aClassId].types.length;i++){for(uintj=0;j<cacheClasses[_bClassId].types.length;j++){if(typeAdvantages[cacheClasses[_aClassId].types[i]]==cacheClasses[_bClassId].types[j]){aHasAdvantage=true;}if(typeAdvantages[cacheClasses[_bClassId].types[j]]==cacheClasses[_aClassId].types[i]){bHasAdvantage=true;}}}}

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 529
column: 4
content: functionattack(uint8_index,uint8_ran,uint16[6]_aStats,uint16[6]_bStats)constantpublicreturns(boolwin){if(_ran<_index*maxRandomRound)_ran=maxRandomRound;else_ran=_ran-_index*maxRandomRound;uint16round=0;uint16aHp=_aStats[0];uint16bHp=_bStats[0];if(_aStats[5]>_bStats[5]){while(round<maxRandomRound&&aHp>0&&bHp>0){if(round%2==0){bHp=safeDeduct(bHp,calHpDeducted(_aStats[1],_aStats[3],_bStats[2],_bStats[4],round==_ran));}else{aHp=safeDeduct(aHp,calHpDeducted(_bStats[1],_bStats[3],_aStats[2],_aStats[4],round==_ran));}round++;}}else{while(round<maxRandomRound&&aHp>0&&bHp>0){if(round%2!=0){bHp=safeDeduct(bHp,calHpDeducted(_aStats[1],_aStats[3],_bStats[2],_bStats[4],round==_ran));}else{aHp=safeDeduct(aHp,calHpDeducted(_bStats[1],_bStats[3],_aStats[2],_aStats[4],round==_ran));}round++;}}win=aHp>=bHp;}

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 562
column: 4
content: functionattackTrainer(uint8_index,uint8_ran,uint8_trainerId,uint8_trainerLevel,uint32_objClassId,uint16[6]_objStats)constantpublicreturns(boolresult){GymTrainermemorytrainer=gymTrainers[_trainerId];uint16[6]memorytrainerStats;uinti=0;for(i=0;i<STAT_COUNT;i+=1){trainerStats[i]=trainer.statBases[i];}for(i=0;i<cacheClasses[trainer.classId].steps.length;i++){trainerStats[i]+=uint16(safeMult(cacheClasses[trainer.classId].steps[i],_trainerLevel*3));}boolobjHasAdvantage;booltrainerHasAdvantage;(objHasAdvantage,trainerHasAdvantage)=getTypeSupport(_objClassId,trainer.classId);uint16originAttack=_objStats[1];uint16originAttackSpecial=_objStats[3];if(objHasAdvantage){_objStats[1]+=_objStats[1]*typeBuffPercentage/100;_objStats[3]+=_objStats[3]*typeBuffPercentage/100;}if(trainerHasAdvantage){trainerStats[1]+=trainerStats[1]*typeBuffPercentage/100;trainerStats[3]+=trainerStats[3]*typeBuffPercentage/100;}result=attack(_index,_ran,_objStats,trainerStats);_objStats[1]=originAttack;_objStats[3]=originAttackSpecial;}

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 591
column: 4
content: functiongetObjInfo(uint64_objId)constantpublicreturns(uint32classId,addresstrainee,uint8level){EtheremonDataBasedata=EtheremonDataBase(dataContract);MonsterObjAccmemoryobj;(obj.monsterId,classId,trainee,obj.exp,obj.createIndex,obj.lastClaimIndex,obj.createTime)=data.getMonsterObj(_objId);level=getLevel(obj.exp);}

ruleId: SOLIDITY_DEPRECATED_CONSTRUCTIONS
patternId: 28fa69
severity: 1
line: 646
column: 4
content: functiongetTrainingLog(address_trainee)constantexternalreturns(uint8,uint8,uint8,uint64,uint8,uint8,uint8){TrainingLogmemorytrainingLog=trainees[_trainee];return(trainingLog.trainers[0],trainingLog.trainers[1],trainingLog.trainers[2],trainingLog.objId,trainingLog.trainerLevel,trainingLog.objLevel,trainingLog.ran);}

ruleId: SOLIDITY_EXTRA_GAS_IN_LOOPS
patternId: d3j11j
severity: 1
line: 503
column: 8
content: for(uinti=0;i<cacheClasses[_aClassId].types.length;i++){for(uintj=0;j<cacheClasses[_bClassId].types.length;j++){if(typeAdvantages[cacheClasses[_aClassId].types[i]]==cacheClasses[_bClassId].types[j]){aHasAdvantage=true;}if(typeAdvantages[cacheClasses[_bClassId].types[j]]==cacheClasses[_aClassId].types[i]){bHasAdvantage=true;}}}

ruleId: SOLIDITY_EXTRA_GAS_IN_LOOPS
patternId: d3j11j
severity: 1
line: 504
column: 12
content: for(uintj=0;j<cacheClasses[_bClassId].types.length;j++){if(typeAdvantages[cacheClasses[_aClassId].types[i]]==cacheClasses[_bClassId].types[j]){aHasAdvantage=true;}if(typeAdvantages[cacheClasses[_bClassId].types[j]]==cacheClasses[_aClassId].types[i]){bHasAdvantage=true;}}

ruleId: SOLIDITY_EXTRA_GAS_IN_LOOPS
patternId: d3j11j
severity: 1
line: 566
column: 8
content: for(i=0;i<STAT_COUNT;i+=1){trainerStats[i]=trainer.statBases[i];}

ruleId: SOLIDITY_EXTRA_GAS_IN_LOOPS
patternId: d3j11j
severity: 1
line: 569
column: 8
content: for(i=0;i<cacheClasses[trainer.classId].steps.length;i++){trainerStats[i]+=uint16(safeMult(cacheClasses[trainer.classId].steps[i],_trainerLevel*3));}

ruleId: SOLIDITY_EXTRA_GAS_IN_LOOPS
patternId: d3j11j
severity: 1
line: 616
column: 8
content: for(i=0;i<STAT_COUNT;i+=1){objStats[i]=data.getElementInArrayType(ArrayType.STAT_BASE,_objId,i);}

ruleId: SOLIDITY_EXTRA_GAS_IN_LOOPS
patternId: d3j11j
severity: 1
line: 619
column: 8
content: for(i=0;i<cacheClasses[att.objClassId].steps.length;i++){objStats[i]+=uint16(safeMult(cacheClasses[att.objClassId].steps[i],att.objLevel*3));}

ruleId: SOLIDITY_EXTRA_GAS_IN_LOOPS
patternId: k4o1l4
severity: 1
line: 539
column: 12
content: while(round<maxRandomRound&&aHp>0&&bHp>0){if(round%2==0){bHp=safeDeduct(bHp,calHpDeducted(_aStats[1],_aStats[3],_bStats[2],_bStats[4],round==_ran));}else{aHp=safeDeduct(aHp,calHpDeducted(_bStats[1],_bStats[3],_aStats[2],_aStats[4],round==_ran));}round++;}

ruleId: SOLIDITY_EXTRA_GAS_IN_LOOPS
patternId: k4o1l4
severity: 1
line: 549
column: 12
content: while(round<maxRandomRound&&aHp>0&&bHp>0){if(round%2!=0){bHp=safeDeduct(bHp,calHpDeducted(_aStats[1],_aStats[3],_bStats[2],_bStats[4],round==_ran));}else{aHp=safeDeduct(aHp,calHpDeducted(_bStats[1],_bStats[3],_aStats[2],_aStats[4],round==_ran));}round++;}

ruleId: SOLIDITY_GAS_LIMIT_IN_LOOPS
patternId: f6f853
severity: 2
line: 503
column: 8
content: for(uinti=0;i<cacheClasses[_aClassId].types.length;i++){for(uintj=0;j<cacheClasses[_bClassId].types.length;j++){if(typeAdvantages[cacheClasses[_aClassId].types[i]]==cacheClasses[_bClassId].types[j]){aHasAdvantage=true;}if(typeAdvantages[cacheClasses[_bClassId].types[j]]==cacheClasses[_aClassId].types[i]){bHasAdvantage=true;}}}

ruleId: SOLIDITY_GAS_LIMIT_IN_LOOPS
patternId: f6f853
severity: 2
line: 504
column: 12
content: for(uintj=0;j<cacheClasses[_bClassId].types.length;j++){if(typeAdvantages[cacheClasses[_aClassId].types[i]]==cacheClasses[_bClassId].types[j]){aHasAdvantage=true;}if(typeAdvantages[cacheClasses[_bClassId].types[j]]==cacheClasses[_aClassId].types[i]){bHasAdvantage=true;}}

ruleId: SOLIDITY_GAS_LIMIT_IN_LOOPS
patternId: f6f853
severity: 2
line: 569
column: 8
content: for(i=0;i<cacheClasses[trainer.classId].steps.length;i++){trainerStats[i]+=uint16(safeMult(cacheClasses[trainer.classId].steps[i],_trainerLevel*3));}

ruleId: SOLIDITY_GAS_LIMIT_IN_LOOPS
patternId: f6f853
severity: 2
line: 619
column: 8
content: for(i=0;i<cacheClasses[att.objClassId].steps.length;i++){objStats[i]+=uint16(safeMult(cacheClasses[att.objClassId].steps[i],att.objLevel*3));}

ruleId: SOLIDITY_GAS_LIMIT_IN_LOOPS
patternId: 17f23a
severity: 1
line: 470
column: 15
content: minIndex<maxIndex

ruleId: SOLIDITY_GAS_LIMIT_IN_LOOPS
patternId: 17f23a
severity: 1
line: 539
column: 19
content: round<maxRandomRound&&aHp>0&&bHp>0

ruleId: SOLIDITY_GAS_LIMIT_IN_LOOPS
patternId: 17f23a
severity: 1
line: 549
column: 19
content: round<maxRandomRound&&aHp>0&&bHp>0

ruleId: SOLIDITY_PRAGMAS_VERSION
patternId: 23fc32
severity: 1
line: 1
column: 16
content: ^

ruleId: SOLIDITY_REVERT_REQUIRE
patternId: c56b12
severity: 1
line: 439
column: 8
content: if(_amount>this.balance){revert();}

ruleId: SOLIDITY_REVERT_REQUIRE
patternId: c56b12
severity: 1
line: 599
column: 8
content: if(_trainerLevel>maxTrainerLevel)revert();

ruleId: SOLIDITY_REVERT_REQUIRE
patternId: c56b12
severity: 1
line: 601
column: 8
content: if(msg.value!=gymFee)revert();

ruleId: SOLIDITY_REVERT_REQUIRE
patternId: c56b12
severity: 1
line: 603
column: 8
content: if(_t1==_t2||_t1==_t3||_t2==_t3)revert();

ruleId: SOLIDITY_REVERT_REQUIRE
patternId: c56b12
severity: 1
line: 605
column: 8
content: if(_t1==0||_t2==0||_t3==0||_t1>totalTrainer||_t2>totalTrainer||_t3>totalTrainer)revert();

ruleId: SOLIDITY_REVERT_REQUIRE
patternId: c56b12
severity: 1
line: 610
column: 8
content: if(msg.sender!=att.trainee)revert();

ruleId: SOLIDITY_SHOULD_RETURN_STRUCT
patternId: 7d54ca
severity: 1
line: 501
column: 89
content: (boolaHasAdvantage,boolbHasAdvantage)

ruleId: SOLIDITY_UPGRADE_TO_050
patternId: 341gim
severity: 1
line: 135
column: 67
content: stringname

ruleId: SOLIDITY_VISIBILITY
patternId: b51ce0
severity: 1
line: 207
column: 4
content: mapping(uint8=>uint8)typeAdvantages;

ruleId: SOLIDITY_VISIBILITY
patternId: b51ce0
severity: 1
line: 208
column: 4
content: mapping(uint32=>CacheClassInfo)cacheClasses;

ruleId: SOLIDITY_VISIBILITY
patternId: b51ce0
severity: 1
line: 209
column: 4
content: mapping(uint8=>uint32)levelExps;

ruleId: SOLIDITY_VISIBILITY
patternId: b51ce0
severity: 1
line: 210
column: 4
content: mapping(uint8=>uint32)levelExpGains;

SOLIDITY_VISIBILITY :4
SOLIDITY_DEPRECATED_CONSTRUCTIONS :23
SOLIDITY_PRAGMAS_VERSION :1
SOLIDITY_REVERT_REQUIRE :6
SOLIDITY_EXTRA_GAS_IN_LOOPS :8
SOLIDITY_UPGRADE_TO_050 :1
SOLIDITY_GAS_LIMIT_IN_LOOPS :7
SOLIDITY_SHOULD_RETURN_STRUCT :1